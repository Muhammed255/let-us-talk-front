<div id="main">
  <header class="header">
    <mat-toolbar class="top-toolbar mat-elevation-z2" color="primary">
      <div fxLayout="row" fxLayoutAlign="space-between center" fxFlex>
        <div fxLayout="row" fxLayoutAlign="center center">
          <a
            routerLink="/"
            fxLayout="row"
            fxLayoutAlign="start center"
            class="logo"
            ngClass.xs="mobile"
          >
            <img src="assets/img/logo.png" alt="logo" />
            <span class="mx-2">Let's Talk</span>
          </a>
        </div>
        <div fxLayout="row" fxLayoutAlign="end center" *ngIf="userIsAuthenticated">
          <button
            mat-icon-button
            [matMenuTriggerFor]="userMenu"
            #userMenuTrigger="matMenuTrigger"
          >
            <mat-icon>account_circle</mat-icon>
          </button>

          <mat-menu
            #userMenu="matMenu"
            [overlapTrigger]="false"
            class="toolbar-dropdown-menu user-menu"
          >
            <mat-card
              fxLayout="row"
              fxLayoutAlign="space-around center"
              class="user-info p-0"
            >
              <img [src]="userImage" alt="user-image" />
              <div fxLayout="column" fxLayoutAlign="center center">
                <h2>{{ authUser?.firstName + " " + authUser?.lastName }}</h2>
                <h3 class="secondary-text-color">{{ authUser?.email }}</h3>
                <p class="secondary-text-color">
                  Member since {{ authUser?.createdAt | date: "MMM '. ' yyyy" }}
                </p>
              </div>
            </mat-card>
            <mat-divider></mat-divider>
            <a mat-menu-item routerLink="profile">
              <mat-icon>person</mat-icon>
              <span>Profile</span>
            </a>
            <a mat-menu-item routerLink="settings">
              <mat-icon>settings</mat-icon>
              <span>Settings</span>
            </a>
            <a mat-menu-item routerLink="/">
              <mat-icon>lock</mat-icon>
              <span>Lock screen</span>
            </a>
            <a mat-menu-item routerLink="help">
              <mat-icon>help</mat-icon>
              <span>Help</span>
            </a>
            <mat-divider></mat-divider>
            <a mat-menu-item (click)="onLogout()">
              <mat-icon>power_settings_new</mat-icon>
              <span>Log out</span>
            </a>
          </mat-menu>
        </div>
        <div fxLayout="row" fxLayoutAlign="end center" *ngIf="!userIsAuthenticated">
          <button mat-button routerLink="/auth/login">Login</button>
          <button mat-button routerLink="/auth/signup">Signup</button>
        </div>
      </div>
    </mat-toolbar>
  </header>
</div>

<router-outlet></router-outlet>
